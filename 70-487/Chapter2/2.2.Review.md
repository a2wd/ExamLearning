# Chapter 2

Querying and manipulating data with EntityFramework

## Part 1

Query/Manipulate data with EF

### Thought experiment

1. For a structure with a parent, five related children one of which with two grandchildren, it may be preferrable to lazy load the data, but the ultimate decision is going to rest on the size of that data compared to the number of possible roundtrips.

2. If you pull back all the data, you have space considerations to take into account.

3. If you lazy-load the data, you have network latency to consider.

4. The best approach will be determined by the level of knowledge about what you will do with the data - if a known number of queries will be required, then it could be better to load all at once, but if an unknown number, it could be better to lazy-load.

### Quiz

* 1.C FirstOrDefault causes a query to be executed
* 2.A/B If you try to add an entity that already exists, it is made if there is no key violation else it errors
* 3.D If you attach an entity to a context with an existing entity, it is updated.


## Part 2

Query & manipulate data using data provider for E.F.

### Thought experiment

1.  Using EntityProviders would help a transition from ADO.NET to EF.

2. The decision to move all code to EF could improve maintainability and future proof the solution.

3. Operations that are likely to be long-running are good candidates for asynchronous methods.

### Quiz

* 1.C ExecuteReaderAsync is for async operations
* 2.C/D You could use a transaction to mitigate problems from an overloaded DB
* 3.A/C Entity & SqlTransactions allow you to set a transaction scope.


## Part 3

Query data by using LINQ to Entities

### Thought experiment

### Quiz


## Part 4

### Thought experiment

### Quiz


## Part 5

### Thought experiment

### Quiz
