# Chapter 1

Accessing data

## Part 1

Choose data access technologies

### Thought experiment

1. For a legacy app being gradually exposed to external access, it would be advisable to move away from ADO.net

2. Using EF wouldn't of itself help with external access, but it would allow WCF which is based on EF.

3. Using WCF would provide an advantage over ADO.net in that it would allow for simpler and more compatible access to the app with JSON data and RESTful services.

### Quiz

* 1.B to add a new property, you could add the field to the table and model and update the mapping
* 2.C/D The data services frameworks could expose application data for external consumption
* 3.C In an entity data model, the MSL file handles the mappings.


## Part 2

Implement caching

### Thought experiment

1. Data that doesn't change very often would be good for caching and data that is not critical.

2. When determining a caching strategy, you could consider the need for up-to-date information and the load experienced by providing different information dynamically as opposed to cached.

3. With regards data changes, it would be good to think about the need to check when the underlying data is modified or otherwise stale. CacheDependency objects can help monitor this.

### Quiz

* 1.A/B/D - FileChangeMonitor and SqlChangeMonitor are change monitors while CacheEntryChangeMonitor is a base class for these.
* 2.C System.Runtime.caching has a NotRemovable (or else, Default) attribute.
* 3.A/D There are many ways to add an item to a cache.


## Part 3

Implement transactions

### Thought experiment

1. An operation with different commands that need to happen together would make a good choice for transactions

2. You might not make every operational transactional because of the extra memory requirements & overheads involved.

3. The transaction implementation would be guided by the application requirements and how data is read/written. Locks, isolation levels and priorities need to be considered.

### Quiz

* 1.B RepeatableReads is the isolation level that will avoid nonrepeatable reads but may still allow phantom data
* 2.A/B both quick running queries on one table and long running queries on multiple tables could benefit from transactions


## Part 4

Implement Data Storage in Windows Azure

### Thought experiment

1. For a video storage service, it would be good to consider blob storage while the advanced statistics could use table storage (or SQL if the data is structured).

2. You could use different storage options depending on the kind of data being stored, in this case very disparate types.

3. The video files could good candidate for a CDN, though the statistics might be likely to change and therefore likelier to become stale on a CDN.

### Quiz

* 1. A/B table storage and queue storage could be used for a chat room
* 2. B/C the azure CDN improves data access for users further from the source and helps deal with spikes in demand
* 3. A. the vo.sitename.net url uses the CDN


## Part 5

Create and implement a WCF data service

### Thought experiment

### Quiz


## Part 6

### Thought experiment

### Quiz
