# Chapter 5

Deploying web application services

## Part 1

Design a deployment strategy

### Thought experiment

1. Windows Azure can help with backend hosting by allowing for continuous integration and continuous deployment. It can also help deal with high demand with easy scaling out of a server farm.

2. Continuous deployment needs to be planned for because of the Agile methodology undertaken whereby successive iterations will follow and features are expected to be deployed regularly. The overhead of not using it and having to continually and manually set up environments would be bad for development otherwise.

### Quiz

* 1.C Web deploy can allow you to make registry changes in deployment.
* 2.B/D You can store state in a web farm in a state server or a sql DB
* 3.A/B/C for a CI strategy, a build server, unit tests and integration tests are all important.


## Part 2

Choosing a deployment strategy

### Thought experiment

1. A VIP Swap sets up a staging version of the service with corresponding files and instances. This can then be swapped by changing over the connections when needded. The in-place upgrade by contrast works by updating the roles one-by-one.

2. The best choice depends on what is being updated. If configuration files such as certificates or endpoints need to be changed then a VIP swap is preferable, however this does use resources. If only files are changing then an in place upgrade may be sufficient.

### Quiz

* 1.B If you have a single web role and want to guarantee uptime during upgrades, you need a second instance to use in a VIP swap.
* 2.D an InternalEndpoint added to a worker role will allow a co-deployed web role to talk to it privately.
* 3.A/C Using oSFamily="3" and osVersion="*" will ensure the latest Azure OS


## Part 3

Configure a web application for deployment

### Thought experiment

1. In a typical work environment, you would need to deploy a different configuration to each of dev, test, UAT and prod. There will likely be different databases and setups for each.

2. The choice of web.config transforms or web deploy parameters depends on the type of changes because of the number of different environments, it may make sense to use web deploy parameters and parameterise the different variables.

### Quiz

* 1.A/B You want to turn off debug flags and build with a release config when building for prod.
* 2.C You can use an XSLT to remove an element from the web.config
* 3.C XmlPoke and MSBuild can enable automation of a parameters file.


## Part 4

Managing packages with NuGet

### Thought experiment

### Quiz


## Part 5

### Thought experiment

### Quiz


## Part 6

### Thought experiment

### Quiz